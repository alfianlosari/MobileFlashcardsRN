["729c3b185c964c7ceb87ecd54370f1a56d372dbc","b8f2333ebb613f8968a7290b816343f447ffd0ec",["react-native","expo"],[205,243],{"version":3,"sources":["/Users/alfianlosari/Desktop/RN/MobileFlashcards/utils/helpers.js"],"names":["clearLocalNotification","setLocalNotification","NOTIFICATION_KEY","removeItem","then","cancelAllScheduledNotificationsAsync","createNotification","title","body","ios","sound","android","priority","sticky","vibrate","getItem","JSON","parse","data","askAsync","NOTIFICATIONS","status","console","log","tommorow","Date","setDate","getDate","setHours","setMinutes","scheduleLocalNotificationAsync","time","repeat","setItem","stringify"],"mappings":";;;QAKgBA,sB,GAAAA,sB;QAqBAC,oB,GAAAA,oB;;AA1BhB;;AACA;;AAEA,IAAMC,mBAAmB,iCAAzB;;AAEO,SAASF,sBAAT,GAAkC;AACrC,WAAO,0BAAaG,UAAb,CAAwBD,gBAAxB,EACFE,IADE,CACG,oBAAcC,oCADjB,CAAP;AAEH;;AAED,SAASC,kBAAT,GAA8B;AAC1B,WAAO;AACHC,eAAO,mBADJ;AAEHC,mDAFG;AAGHC,aAAK;AACDC,mBAAO;AADN,SAHF;AAMHC,iBAAS;AACLD,mBAAO,IADF;AAELE,sBAAU,MAFL;AAGLC,oBAAQ,KAHH;AAILC,qBAAS;AAJJ;AANN,KAAP;AAaH;;AAEM,SAASb,oBAAT,GAAgC;AACnC,8BAAac,OAAb,CAAqBb,gBAArB,EACKE,IADL,CACUY,KAAKC,KADf,EAEKb,IAFL,CAEU,UAACc,IAAD,EAAU;AACZ,YAAIA,SAAS,IAAb,EAAmB;AACf,8BAAYC,QAAZ,CAAqB,kBAAYC,aAAjC,EACKhB,IADL,CACU,gBAAc;AAAA,oBAAZiB,MAAY,QAAZA,MAAY;;AAChBC,wBAAQC,GAAR,CAAYF,MAAZ;AACA,oBAAIA,WAAW,SAAX,IAAwBA,UAAU,cAAtC,EAAsD;AAClD,wCAAchB,oCAAd;AACA,wBAAImB,WAAW,IAAIC,IAAJ,EAAf;AACAD,6BAASE,OAAT,CAAiBF,SAASG,OAAT,KAAqB,CAAtC;AACAH,6BAASI,QAAT,CAAkB,CAAlB;AACAJ,6BAASK,UAAT,CAAoB,CAApB;AACA,wCAAcC,8BAAd,CAA6CxB,oBAA7C,EACA;AACIyB,8BAAMP,QADV;AAEIQ,gCAAQ;AAFZ,qBADA;AAKA,8CAAaC,OAAb,CAAqB/B,gBAArB,EAAuCc,KAAKkB,SAAL,CAAe,IAAf,CAAvC;AACH;AACJ,aAhBL;AAiBH;AACJ,KAtBL;AAuBH","sourcesContent":["import { AsyncStorage } from 'react-native'\nimport { Notifications, Permissions } from 'expo';\n\nconst NOTIFICATION_KEY = 'MobileFlashcards::Notifications';\n\nexport function clearLocalNotification() {\n    return AsyncStorage.removeItem(NOTIFICATION_KEY)\n        .then(Notifications.cancelAllScheduledNotificationsAsync)\n}\n\nfunction createNotification() {\n    return {\n        title: 'Mobile Flashcards',\n        body: `Don't forget to take a quiz today!`,\n        ios: {\n            sound: true\n        },\n        android: {\n            sound: true,\n            priority: 'high',\n            sticky: false,\n            vibrate: true\n        }\n    }\n}\n\nexport function setLocalNotification() {\n    AsyncStorage.getItem(NOTIFICATION_KEY)\n        .then(JSON.parse)\n        .then((data) => {\n            if (data === null) {\n                Permissions.askAsync(Permissions.NOTIFICATIONS)\n                    .then(({status}) => {\n                        console.log(status);\n                        if (status === 'granted' || status == 'undetermined') {\n                            Notifications.cancelAllScheduledNotificationsAsync()\n                            let tommorow = new Date();\n                            tommorow.setDate(tommorow.getDate() + 1);\n                            tommorow.setHours(8);\n                            tommorow.setMinutes(0);\n                            Notifications.scheduleLocalNotificationAsync(createNotification(),\n                            {\n                                time: tommorow,\n                                repeat: 'day'\n                            })\n                            AsyncStorage.setItem(NOTIFICATION_KEY, JSON.stringify(true));\n                        }\n                    })\n            }\n        })\n}"]}]